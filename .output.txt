
=== Activating virtual environment ===
=== Upgrading pip ===
Requirement already satisfied: pip in ./pyvenv11/lib/python3.13/site-packages (25.1.1)
=== Installing test dependencies ===
Requirement already satisfied: pytest==8.0.0 in ./pyvenv11/lib/python3.13/site-packages (from -r requirements-test.txt (line 1)) (8.0.0)
Requirement already satisfied: pytest-asyncio==0.23.5 in ./pyvenv11/lib/python3.13/site-packages (from -r requirements-test.txt (line 2)) (0.23.5)
Requirement already satisfied: pytest-cov==4.1.0 in ./pyvenv11/lib/python3.13/site-packages (from -r requirements-test.txt (line 3)) (4.1.0)
Requirement already satisfied: pytest-mock==3.12.0 in ./pyvenv11/lib/python3.13/site-packages (from -r requirements-test.txt (line 4)) (3.12.0)
Requirement already satisfied: coverage==7.4.1 in ./pyvenv11/lib/python3.13/site-packages (from -r requirements-test.txt (line 5)) (7.4.1)
Requirement already satisfied: iniconfig in ./pyvenv11/lib/python3.13/site-packages (from pytest==8.0.0->-r requirements-test.txt (line 1)) (2.1.0)
Requirement already satisfied: packaging in ./pyvenv11/lib/python3.13/site-packages (from pytest==8.0.0->-r requirements-test.txt (line 1)) (25.0)
Requirement already satisfied: pluggy<2.0,>=1.3.0 in ./pyvenv11/lib/python3.13/site-packages (from pytest==8.0.0->-r requirements-test.txt (line 1)) (1.6.0)
=== Installing project dependencies ===
Collecting discord.py==2.3.2 (from -r requirements.txt (line 1))
  Using cached discord.py-2.3.2-py3-none-any.whl.metadata (4.9 kB)
Collecting python-dotenv==1.0.0 (from -r requirements.txt (line 2))
  Using cached python_dotenv-1.0.0-py3-none-any.whl.metadata (21 kB)
Collecting watchtower==3.0.1 (from -r requirements.txt (line 3))
  Using cached watchtower-3.0.1-py3-none-any.whl.metadata (15 kB)
Collecting boto3==1.28.38 (from -r requirements.txt (line 4))
  Using cached boto3-1.28.38-py3-none-any.whl.metadata (6.7 kB)
Collecting pytz==2023.3 (from -r requirements.txt (line 5))
  Using cached pytz-2023.3-py2.py3-none-any.whl.metadata (22 kB)
Collecting matplotlib==3.7.2 (from -r requirements.txt (line 6))
  Using cached matplotlib-3.7.2.tar.gz (38.1 MB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Collecting numpy==1.25.2 (from -r requirements.txt (line 7))
  Using cached numpy-1.25.2.tar.gz (10.8 MB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
ERROR: Exception:
Traceback (most recent call last):
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/cli/base_command.py", line 105, in _run_wrapper
    status = _inner_run()
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/cli/base_command.py", line 96, in _inner_run
    return self.run(options, args)
           ~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/cli/req_command.py", line 68, in wrapper
    return func(self, options, args)
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/commands/install.py", line 387, in run
    requirement_set = resolver.resolve(
        reqs, check_supported_wheels=not options.target_dir
    )
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/resolver.py", line 96, in resolve
    result = self._result = resolver.resolve(
                            ~~~~~~~~~~~~~~~~^
        collected.requirements, max_rounds=limit_how_complex_resolution_can_be
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_vendor/resolvelib/resolvers/resolution.py", line 515, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_vendor/resolvelib/resolvers/resolution.py", line 388, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_vendor/resolvelib/resolvers/resolution.py", line 141, in _add_to_criteria
    if not criterion.candidates:
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_vendor/resolvelib/structs.py", line 194, in __bool__
    return bool(self._sequence)
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py", line 163, in __bool__
    self._bool = any(self)
                 ~~~^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py", line 147, in <genexpr>
    return (c for c in iterator if id(c) not in self._incompatible_ids)
                       ^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py", line 37, in _iter_built
    candidate = func()
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 187, in _make_candidate_from_link
    base: Optional[BaseCandidate] = self._make_base_candidate_from_link(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        link, template, name, version
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 233, in _make_base_candidate_from_link
    self._link_candidate_cache[link] = LinkCandidate(
                                       ~~~~~~~~~~~~~^
        link,
        ^^^^^
    ...<3 lines>...
        version=version,
        ^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 306, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        link=link,
        ^^^^^^^^^^
    ...<4 lines>...
        version=version,
        ^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 159, in __init__
    self.dist = self._prepare()
                ~~~~~~~~~~~~~^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 236, in _prepare
    dist = self._prepare_distribution()
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 317, in _prepare_distribution
    return preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/operations/prepare.py", line 532, in prepare_linked_requirement
    return self._prepare_linked_requirement(req, parallel_builds)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/operations/prepare.py", line 647, in _prepare_linked_requirement
    dist = _get_prepared_distribution(
        req,
    ...<3 lines>...
        self.check_build_deps,
    )
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/operations/prepare.py", line 71, in _get_prepared_distribution
    abstract_dist.prepare_distribution_metadata(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        finder, build_isolation, check_build_deps
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/distributions/sdist.py", line 56, in prepare_distribution_metadata
    self._install_build_reqs(finder)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/distributions/sdist.py", line 126, in _install_build_reqs
    build_reqs = self._get_build_requires_wheel()
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/distributions/sdist.py", line 103, in _get_build_requires_wheel
    return backend.get_requires_for_build_wheel()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_internal/utils/misc.py", line 702, in get_requires_for_build_wheel
    return super().get_requires_for_build_wheel(config_settings=cs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_vendor/pyproject_hooks/_impl.py", line 196, in get_requires_for_build_wheel
    return self._call_hook(
           ~~~~~~~~~~~~~~~^
        "get_requires_for_build_wheel", {"config_settings": config_settings}
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/pip/_vendor/pyproject_hooks/_impl.py", line 402, in _call_hook
    raise BackendUnavailable(
    ...<4 lines>...
    )
pip._vendor.pyproject_hooks._impl.BackendUnavailable: Cannot import 'setuptools.build_meta'
=== Running tests with coverage ===
Instalando discord.py...
Requirement already satisfied: discord.py in ./pyvenv11/lib/python3.13/site-packages (2.5.2)
Requirement already satisfied: aiohttp<4,>=3.7.4 in ./pyvenv11/lib/python3.13/site-packages (from discord.py) (3.12.12)
Requirement already satisfied: audioop-lts in ./pyvenv11/lib/python3.13/site-packages (from discord.py) (0.2.1)
Requirement already satisfied: aiohappyeyeballs>=2.5.0 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (2.6.1)
Requirement already satisfied: aiosignal>=1.1.2 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (1.3.2)
Requirement already satisfied: attrs>=17.3.0 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (25.3.0)
Requirement already satisfied: frozenlist>=1.1.1 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (1.7.0)
Requirement already satisfied: multidict<7.0,>=4.5 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (6.4.4)
Requirement already satisfied: propcache>=0.2.0 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (0.3.2)
Requirement already satisfied: yarl<2.0,>=1.17.0 in ./pyvenv11/lib/python3.13/site-packages (from aiohttp<4,>=3.7.4->discord.py) (1.20.1)
Requirement already satisfied: idna>=2.0 in ./pyvenv11/lib/python3.13/site-packages (from yarl<2.0,>=1.17.0->aiohttp<4,>=3.7.4->discord.py) (3.10)
Instalando python-dotenv...
Requirement already satisfied: python-dotenv in ./pyvenv11/lib/python3.13/site-packages (1.1.0)
============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.0.0, pluggy-1.6.0
rootdir: /Users/felipe/git/tokugawa-discord-game/untitled
plugins: asyncio-0.23.5, cov-4.1.0, mock-3.12.0
asyncio: mode=Mode.STRICT
collected 53 items / 12 errors / 2 skipped
==================================== ERRORS ====================================
_______________ ERROR collecting tests/commands/test_commands.py _______________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/commands/test_commands.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/commands/test_commands.py:8: in <module>
    from cogs.registration import Registration
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/cogs/registration.py:5: in <module>
    from discord.ext import commands
tests/conftest.py:35: in patched_import
    return original_import(name, *args, **kwargs)
pyvenv11/lib/python3.13/site-packages/discord/ext/commands/__init__.py:11: in <module>
    from .bot import *
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'discord.ext.commands.src'
__________ ERROR collecting tests/persistence/test_club_selection.py ___________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/persistence/test_club_selection.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/persistence/test_club_selection.py:10: in <module>
    from cogs.registration import Registration
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/cogs/registration.py:5: in <module>
    from discord.ext import commands
tests/conftest.py:35: in patched_import
    return original_import(name, *args, **kwargs)
pyvenv11/lib/python3.13/site-packages/discord/ext/commands/__init__.py:11: in <module>
    from .bot import *
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'discord.ext.commands.src'
_______ ERROR collecting tests/story_mode/test_challenge_chapter_ids.py ________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_challenge_chapter_ids.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_challenge_chapter_ids.py:7: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
______ ERROR collecting tests/story_mode/test_chapter_suffix_handling.py _______
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_chapter_suffix_handling.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_chapter_suffix_handling.py:7: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
__________ ERROR collecting tests/story_mode/test_club_integration.py __________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_club_integration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_club_integration.py:2: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
_________ ERROR collecting tests/story_mode/test_club_requirements.py __________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_club_requirements.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_club_requirements.py:4: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
___________ ERROR collecting tests/story_mode/test_club_sequence.py ____________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_club_sequence.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_club_sequence.py:4: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
______ ERROR collecting tests/story_mode/test_club_specific_dialogues.py _______
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_club_specific_dialogues.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_club_specific_dialogues.py:7: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
___ ERROR collecting tests/story_mode/test_conditional_chapter_navigation.py ___
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_conditional_chapter_navigation.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_conditional_chapter_navigation.py:7: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
_____ ERROR collecting tests/story_mode/test_story_mode_initialization.py ______
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_story_mode_initialization.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_story_mode_initialization.py:2: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
_______ ERROR collecting tests/story_mode/test_story_mode_progression.py _______
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/story_mode/test_story_mode_progression.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/story_mode/test_story_mode_progression.py:7: in <module>
    from story_mode.story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/story_mode/__init__.py:37: in <module>
    from .story_mode import StoryMode
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'src.story_mode.src'
__________________ ERROR collecting tests/test_bot_startup.py __________________
ImportError while importing test module '/Users/felipe/git/tokugawa-discord-game/untitled/tests/test_bot_startup.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.13/3.13.3_1/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_bot_startup.py:9: in <module>
    from bot import bot, TOKEN
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
src/bot.py:4: in <module>
    from discord.ext import commands
tests/conftest.py:35: in patched_import
    return original_import(name, *args, **kwargs)
pyvenv11/lib/python3.13/site-packages/discord/ext/commands/__init__.py:11: in <module>
    from .bot import *
tests/conftest.py:43: in patched_import
    return original_import(name, *args, **kwargs)
E   ModuleNotFoundError: No module named 'discord.ext.commands.src'
=============================== warnings summary ===============================
pyvenv11/lib/python3.13/site-packages/_pytest/config/__init__.py:1223
  /Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/_pytest/config/__init__.py:1223: PytestAssertRewriteWarning: Module already imported so cannot be rewritten: pytest_asyncio
    self._mark_plugins_for_rewrite(hook)
pyvenv11/lib/python3.13/site-packages/_pytest/config/__init__.py:1223
  /Users/felipe/git/tokugawa-discord-game/untitled/pyvenv11/lib/python3.13/site-packages/_pytest/config/__init__.py:1223: PytestAssertRewriteWarning: Module already imported so cannot be rewritten: pytest_mock
    self._mark_plugins_for_rewrite(hook)
-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
---------- coverage: platform darwin, python 3.13.3-final-0 ----------
Name                                                                      Stmts   Miss  Cover   Missing
-------------------------------------------------------------------------------------------------------
setup.py                                                                      2      2     0%   1-3
src/bot.py                                                                  150    146     3%   5-272
src/cogs/__init__.py                                                          2      0   100%
src/cogs/registration.py                                                    126    121     4%   7-287
src/story_mode/__init__.py                                                    9      2    78%   38-40
src/story_mode/chapter.py                                                   506    468     8%   22-31, 43-77, 82-88, 92, 96, 100, 104, 108, 116-199, 214-414, 430-445, 452-534, 542-543, 550-554, 562-567, 573-597, 603-638, 645-680, 688-691, 699-754, 762-835, 841-876, 888-890, 902-913, 926-946, 950, 954, 958
src/story_mode/chapter_loader.py                                             96     81    16%   16-18, 23-63, 67-89, 93-95, 99-103, 108-132
src/story_mode/event.py                                                     181    149    18%   23-42, 46, 50, 54, 61-95, 102-125, 131, 139-141, 147-170, 178-179, 186-190, 198-202, 209-224, 232-233, 244-245, 251-254, 260-266, 272-283, 289, 295-320
src/story_mode/interfaces.py                                                 89     27    70%   13, 18, 26, 33, 40, 47, 58, 63, 70, 77, 84, 95, 100, 105, 112, 119, 133, 140, 153, 160, 167, 174, 188, 195, 202, 209, 216
src/story_mode/npc.py                                                       129    100    22%   21-26, 37, 41, 45-47, 51-64, 70-91, 95-106, 112-130, 138-142, 146-153, 161-164, 168-174, 182-183, 193-194, 200-203, 209, 215-218, 224, 230-239, 245-252
src/story_mode/progress.py                                                  203    152    25%   60, 72, 85-86, 99-100, 114-124, 135-145, 151-166, 172-194, 207-239, 254-273, 285, 297, 310-311, 325-328, 340-341, 353-366, 378-393, 406-413, 426-442, 462-473, 489, 502-503, 516-517, 529-546
src/utils/__init__.py                                                         5      0   100%
src/utils/club_perks.py                                                      81     60    26%   35-40, 54-59, 73-78, 90-97, 111-116, 128-139, 154-156, 172-181, 196-205
src/utils/club_system.py                                                     25     14    44%   27-28, 40, 52-55, 64, 76, 88-100
src/utils/config.py                                                          37      0   100%
src/utils/content_validator.py                                              199    179    10%   9, 25-26, 35-42, 51, 64-77, 90-118, 131-154, 168-225, 238-268, 271-348, 351
src/utils/game_mechanics/__init__.py                                         83     51    39%   43, 47, 51, 55, 59, 63, 67, 71, 75, 85-90, 94-131, 135-145, 149-162
src/utils/game_mechanics/calculators/__init__.py                              0      0   100%
src/utils/game_mechanics/calculators/calculator_interface.py                  3      0   100%
src/utils/game_mechanics/calculators/experience_calculator.py                49     28    43%   13-15, 25-27, 32-35, 40-44, 47-49, 52, 55, 58, 61, 64, 67, 76, 80-81, 85
src/utils/game_mechanics/calculators/experience_calculator_interface.py      15      3    80%   16, 22, 28
src/utils/game_mechanics/calculators/hp_factor_calculator.py                 14      9    36%   26-44
src/utils/game_mechanics/calculators/hp_factor_calculator_interface.py        7      1    86%   16
src/utils/game_mechanics/constants.py                                        32      9    72%   66-74
src/utils/game_mechanics/duel/__init__.py                                     0      0   100%
src/utils/game_mechanics/duel/duel_calculator.py                            101     90    11%   46-200
src/utils/game_mechanics/duel/duel_calculator_interface.py                    7      1    86%   25
src/utils/game_mechanics/duel/duel_narrator.py                               22     12    45%   63-91
src/utils/game_mechanics/duel/duel_narrator_interface.py                      7      1    86%   23
src/utils/game_mechanics/events/__init__.py                                   0      0   100%
src/utils/game_mechanics/events/event_base.py                                20      9    55%   21-24, 28, 32, 36, 40, 54
src/utils/game_mechanics/events/event_interface.py                           18      5    72%   15, 20, 25, 30, 35
src/utils/game_mechanics/events/random_event.py                             209    178    15%   32-40, 48-58, 80-83, 87, 91, 103-322, 335-338, 356-388, 397-398
src/utils/game_mechanics/events/training_event.py                            26     15    42%   22-26, 37-49, 59-67, 76
src/utils/game_mechanics/faction_reputation.py                              120    103    14%   25-29, 38-52, 61, 234-245, 249-267, 282-315, 327-329, 341-366, 378-392, 405-455, 464-467, 480-485
src/utils/json_utils.py                                                      12      7    42%   17-19, 32-34, 47
src/utils/persistence/__init__.py                                             5      0   100%
src/utils/persistence/db_provider.py                                        522    445    15%   35-44, 48-57, 62-67, 71-96, 100-131, 135-140, 145-162, 173-184, 188, 191, 194, 197, 200, 205-228, 232-240, 244-268, 272-308, 313-319, 323-334, 339-344, 348-367, 371-384, 389-399, 403-417, 422-431, 436-441, 445-455, 460-472, 477-488, 493-507, 511-522, 526-536, 541-552, 556-584, 589-597, 605, 610-634, 638, 642-657, 661, 665-680, 684, 688-703, 707, 711-726, 730, 734-749, 753, 757-772, 776, 780-795, 799, 803-818, 822, 826-841, 845, 849-864
src/utils/persistence/dynamodb.py                                           307    247    20%   56-58, 62-79, 83-99, 103-169, 173-376, 381-388, 394-409, 414-436, 441-459, 464-489, 494-505, 510-525, 530-544, 549-562, 567-574, 579-591, 605-612, 626-637, 653-672, 687-704, 721-739, 753-760
src/utils/persistence/dynamodb_clubs.py                                      94     80    15%   19-39, 44-65, 70-85, 90-128, 133-165
src/utils/persistence/dynamodb_players.py                                   102     88    14%   23-93, 98-134, 139-167, 172-182
tests/__init__.py                                                             1      0   100%
tests/commands/test_commands.py                                              49     45     8%   9-109
tests/conftest.py                                                            66     26    61%   50-52, 57-67, 72-76, 81, 103, 116, 132, 150-164, 176
tests/persistence/test_club_selection.py                                     92     86     7%   11-178
tests/persistence/test_db_clubs.py                                           47     27    43%   12-19, 28-37, 42-44, 49-51, 56-61, 66-69
tests/persistence/test_dynamodb.py                                           98     63    36%   52-117, 127-133, 142-150, 159-171, 183-189, 201-208, 215-233, 242-247, 253-259
tests/run_tests.py                                                           18     18     0%   1-41
tests/services/test_game_mechanics.py                                        61     53    13%   12-133
tests/services/test_item_effects.py                                          58     42    28%   8, 12, 21-22, 27-33, 38-43, 48-55, 60-65, 70-74, 78-93, 96
tests/story/test_quiz_grade.py                                               35     28    20%   15-74, 77
tests/story/test_story_mode.py                                               79     77     3%   3-165
tests/story_mode/test_challenge_chapter_ids.py                               31     25    19%   8-86
tests/story_mode/test_chapter_suffix_handling.py                             30     24    20%   8-84
tests/story_mode/test_club_integration.py                                    33     31     6%   3-56
tests/story_mode/test_club_requirements.py                                   36     32    11%   5-70
tests/story_mode/test_club_sequence.py                                       25     21    16%   5-41
tests/story_mode/test_club_specific_dialogues.py                             31     25    19%   8-89
tests/story_mode/test_conditional_chapter_navigation.py                      31     25    19%   8-92
tests/story_mode/test_story_mode_initialization.py                           45     43     4%   3-65
tests/story_mode/test_story_mode_progression.py                              60     54    10%   8-122
tests/test_bot_startup.py                                                    35     30    14%   12-59
tests/test_db_provider_functions.py                                          41     32    22%   13-20, 24-31, 35-57, 60
tests/utils/__init__.py                                                       0      0   100%
tests/utils/game_mechanics/__init__.py                                        0      0   100%
tests/utils/game_mechanics/calculators/__init__.py                            0      0   100%
tests/utils/game_mechanics/calculators/test_experience_calculator.py         60     44    27%   15, 20-28, 33-48, 53-68, 72-76, 80-83, 87-90, 94-97, 100
tests/utils/game_mechanics/calculators/test_hp_factor_calculator.py          31     17    45%   15, 19-20, 25-30, 35-41, 46-47, 52-55, 58
tests/utils/game_mechanics/duel/__init__.py                                   0      0   100%
tests/utils/game_mechanics/duel/test_duel_calculator.py                      75     54    28%   17-31, 49-61, 67-79, 85-98, 104-116, 122-134, 140-154, 157
tests/utils/game_mechanics/duel/test_duel_narrator.py                        52     31    40%   17, 40-55, 61-79, 85-103, 109-127, 133-151, 157-175, 178
tests/utils/game_mechanics/events/__init__.py                                 0      0   100%
tests/utils/game_mechanics/events/test_random_event.py                       29     18    38%   9, 13-16, 21-34, 38-43, 46
tests/utils/game_mechanics/events/test_training_event.py                     47     31    34%   17, 33-43, 47-59, 66-80, 84-85, 88
-------------------------------------------------------------------------------------------------------
TOTAL                                                                      4911   3885    21%
Coverage HTML written to dir htmlcov
=========================== short test summary info ============================
ERROR tests/commands/test_commands.py
ERROR tests/persistence/test_club_selection.py
ERROR tests/story_mode/test_challenge_chapter_ids.py
ERROR tests/story_mode/test_chapter_suffix_handling.py
ERROR tests/story_mode/test_club_integration.py
ERROR tests/story_mode/test_club_requirements.py
ERROR tests/story_mode/test_club_sequence.py
ERROR tests/story_mode/test_club_specific_dialogues.py
ERROR tests/story_mode/test_conditional_chapter_navigation.py
ERROR tests/story_mode/test_story_mode_initialization.py
ERROR tests/story_mode/test_story_mode_progression.py
ERROR tests/test_bot_startup.py
!!!!!!!!!!!!!!!!!!! Interrupted: 12 errors during collection !!!!!!!!!!!!!!!!!!!
================== 2 skipped, 2 warnings, 12 errors in 2.28s ===================
All tests passed successfully!
=== Coverage Summary ===
Name                                                                      Stmts   Miss  Cover
---------------------------------------------------------------------------------------------
setup.py                                                                      2      2     0%
src/bot.py                                                                  150    146     3%
src/cogs/__init__.py                                                          2      0   100%
src/cogs/registration.py                                                    126    121     4%
src/story_mode/__init__.py                                                    9      2    78%
src/story_mode/chapter.py                                                   506    468     8%
src/story_mode/chapter_loader.py                                             96     81    16%
src/story_mode/event.py                                                     181    149    18%
src/story_mode/interfaces.py                                                 89     27    70%
src/story_mode/npc.py                                                       129    100    22%
src/story_mode/progress.py                                                  203    152    25%
src/utils/__init__.py                                                         5      0   100%
src/utils/club_perks.py                                                      81     60    26%
src/utils/club_system.py                                                     25     14    44%
src/utils/config.py                                                          37      0   100%
src/utils/content_validator.py                                              199    179    10%
src/utils/game_mechanics/__init__.py                                         83     51    39%
src/utils/game_mechanics/calculators/__init__.py                              0      0   100%
src/utils/game_mechanics/calculators/calculator_interface.py                  3      0   100%
src/utils/game_mechanics/calculators/experience_calculator.py                49     28    43%
src/utils/game_mechanics/calculators/experience_calculator_interface.py      15      3    80%
src/utils/game_mechanics/calculators/hp_factor_calculator.py                 14      9    36%
src/utils/game_mechanics/calculators/hp_factor_calculator_interface.py        7      1    86%
src/utils/game_mechanics/constants.py                                        32      9    72%
src/utils/game_mechanics/duel/__init__.py                                     0      0   100%
src/utils/game_mechanics/duel/duel_calculator.py                            101     90    11%
src/utils/game_mechanics/duel/duel_calculator_interface.py                    7      1    86%
src/utils/game_mechanics/duel/duel_narrator.py                               22     12    45%
src/utils/game_mechanics/duel/duel_narrator_interface.py                      7      1    86%
src/utils/game_mechanics/events/__init__.py                                   0      0   100%
src/utils/game_mechanics/events/event_base.py                                20      9    55%
src/utils/game_mechanics/events/event_interface.py                           18      5    72%
src/utils/game_mechanics/events/random_event.py                             209    178    15%
src/utils/game_mechanics/events/training_event.py                            26     15    42%
src/utils/game_mechanics/faction_reputation.py                              120    103    14%
src/utils/json_utils.py                                                      12      7    42%
src/utils/persistence/__init__.py                                             5      0   100%
src/utils/persistence/db_provider.py                                        522    445    15%
src/utils/persistence/dynamodb.py                                           307    247    20%
src/utils/persistence/dynamodb_clubs.py                                      94     80    15%
src/utils/persistence/dynamodb_players.py                                   102     88    14%
tests/__init__.py                                                             1      0   100%
tests/commands/test_commands.py                                              49     45     8%
tests/conftest.py                                                            66     26    61%
tests/persistence/test_club_selection.py                                     92     86     7%
tests/persistence/test_db_clubs.py                                           47     27    43%
tests/persistence/test_dynamodb.py                                           98     63    36%
tests/run_tests.py                                                           18     18     0%
tests/services/test_game_mechanics.py                                        61     53    13%
tests/services/test_item_effects.py                                          58     42    28%
tests/story/test_quiz_grade.py                                               35     28    20%
tests/story/test_story_mode.py                                               79     77     3%
tests/story_mode/test_challenge_chapter_ids.py                               31     25    19%
tests/story_mode/test_chapter_suffix_handling.py                             30     24    20%
tests/story_mode/test_club_integration.py                                    33     31     6%
tests/story_mode/test_club_requirements.py                                   36     32    11%
tests/story_mode/test_club_sequence.py                                       25     21    16%
tests/story_mode/test_club_specific_dialogues.py                             31     25    19%
tests/story_mode/test_conditional_chapter_navigation.py                      31     25    19%
tests/story_mode/test_story_mode_initialization.py                           45     43     4%
tests/story_mode/test_story_mode_progression.py                              60     54    10%
tests/test_bot_startup.py                                                    35     30    14%
tests/test_db_provider_functions.py                                          41     32    22%
tests/utils/__init__.py                                                       0      0   100%
tests/utils/game_mechanics/__init__.py                                        0      0   100%
tests/utils/game_mechanics/calculators/__init__.py                            0      0   100%
tests/utils/game_mechanics/calculators/test_experience_calculator.py         60     44    27%
tests/utils/game_mechanics/calculators/test_hp_factor_calculator.py          31     17    45%
tests/utils/game_mechanics/duel/__init__.py                                   0      0   100%
tests/utils/game_mechanics/duel/test_duel_calculator.py                      75     54    28%
tests/utils/game_mechanics/duel/test_duel_narrator.py                        52     31    40%
tests/utils/game_mechanics/events/__init__.py                                 0      0   100%
tests/utils/game_mechanics/events/test_random_event.py                       29     18    38%
tests/utils/game_mechanics/events/test_training_event.py                     47     31    34%
---------------------------------------------------------------------------------------------
TOTAL                                                                      4911   3885    21%
=== Committing and pushing to Git ===
[master b79bb1f] ✅ All tests passed – build verified and coverage updated
 2 files changed, 22 insertions(+), 10 deletions(-)
 create mode 100644 setup.py
Enumerating objects: 8, done.
Counting objects: 100% (8/8), done.
Delta compression using up to 12 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 679 bytes | 679.00 KiB/s, done.
Total 5 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/disparter/toguwaka-discord-game.git
   ee59c79..b79bb1f  master -> master
